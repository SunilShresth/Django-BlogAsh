{% extends "base.html" %}
<head>

<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/bootstrap.css">
</head>
{% block content %}


	<div class="blog"> 
	
		<!-- Messages  -->
	        {% if messages %}
	        <ul class="messages">
	            {% for message in messages %}
	            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
	            {% endfor %}
	        </ul>
	        {% endif %}

   
		<!-- Posts  -->
	        <ul>            
                	<div class="title"><a href="{% url 'post' post.id %}">{{ post.title }}</div><br>
			<div class="user">By: <a href="{%url 'aboutme' %}"> {{ post.user }} </a></div>
	                <ul>
				<div class="time">{{ post.created}}</div>
				<div class="body">{{ post.body|linebreaks }}</div>
			</ul>
            
	        </ul>

		<!-- Comments  -->
		<ul>
		<form action="{% url 'delete_comment' post.id %}" method="POST">{% csrf_token %}

		{% if comments %}
    			<p>Comments:</p>
		{% endif %}
				
		{% for comment in comments %}
          <a name="comment-{{ comment.pk }}">
          
    			<div class="comment">
        			<div class="time">{{ comment.created }} | {{ comment.author }}</div>
        			<div class="body">{{ comment.body }}  </div>
          
				{% if user.is_staff %}
		                	<input type="checkbox" name="delete" value="{{ comment.pk }}">
            				<a href="{% url 'delete_single_comment' post.pk comment.pk %}">delete</a>
        			{% endif %}
    			</div>
		{% endfor %} 
		{% if user.is_staff and comments %}
    			<div class="form-group row">
          <div class="col-sm-5">
            <input type="submit" value="Delete all selected" class="btn btn-primary" />
          </div>
        </div>
    			<br />
		{% endif %}
		</form>
	
		</div>
    <ul>	
		<fieldset>
		<legend> Add a Comment </legend>
		
		<ul>
		<!-- Comment form  -->
    
    <h2></h2>
    {% if form.errors %}
    <div class="text-danger">Please correct the error{{ form.errors|pluralize }} below.</div>
    {% endif %}
    <div class="col-sm-8">
    <form id="ajaxform" action="{% url 'add_comment' post.id %}" method="post">
        {% csrf_token %}
        <!-- {{ form.non_field_errors }} -->
        {{ form.as_p }}
        </div>
        
        <div id="loading" style="display:none;">
            <span id="load_text" class="help-block">loading...</span>
        </div>
        <div id="form_ajax" style="display:none;">
            <span class="help-block">Form submit successfully.</span>
        </div>
        <div id="form_ajax_error" style="display:none;">
            <span class="help-block">Can not submit data due to errors.</span>
        </div>
        <p id="sendwrapper"><input type="submit" value="Comment" id="submitbutton"/></p>
        </form> 
        </ul>
    </fieldset>
</ul>
			 <br>
			
				
		
	</ul>
	</div>

{% endblock %}
